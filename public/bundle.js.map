{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://walkietalkie/./public/client.js"],"sourcesContent":["// Initialize Socket.io\nconst socket = io();\n\n// Web Audio API variables for simple audio transmission\nlet audioContext;\nlet mediaRecorder;\nlet audioChunks = [];\nlet isRecording = false;\nlet remoteAudioBuffers = new Map(); // peerId -> AudioBuffer queue\nlet analyser;\nlet vuDataArray;\nlet vuAnimationId;\nlet currentRoom = null;\nlet peerId = generatePeerId();\nlet peers = new Map();\nlet activeTalkers = new Set();\n\n// DOM elements\nconst joinBtn = document.getElementById('joinBtn');\nconst roomInfo = document.getElementById('roomInfo');\nconst statusText = document.getElementById('statusText');\nconst statusDot = document.getElementById('statusDot');\nconst pttButton = document.getElementById('pttButton');\nconst peersCount = document.getElementById('peersCount');\nconst peersListItems = document.getElementById('peersListItems');\nconst incomingIndicator = document.getElementById('incomingIndicator');\nconst vuGaugeCanvas = document.getElementById('vuGauge');\n\n// Channel dial elements\nconst dial1 = document.getElementById('dial1');\nconst dial2 = document.getElementById('dial2');\nconst dial3 = document.getElementById('dial3');\nconst dial4 = document.getElementById('dial4');\nconst dial5 = document.getElementById('dial5');\nconst dials = [dial1, dial2, dial3, dial4, dial5];\n\n// Initialize dials with all digits\ndials.forEach(dial => {\n    dial.innerHTML = '';\n    // Add digits 0-9 three times for smooth scrolling\n    for (let cycle = 0; cycle < 3; cycle++) {\n        for (let i = 0; i <= 9; i++) {\n            const digitEl = document.createElement('div');\n            digitEl.className = 'dial-digit';\n            digitEl.textContent = i;\n            dial.appendChild(digitEl);\n        }\n    }\n    \n    // Set initial scroll position after a brief delay to ensure rendering\n    setTimeout(() => {\n        const dialHeight = dial.querySelector('.dial-digit').offsetHeight;\n        dial.scrollTop = dialHeight * 10; // Start at middle cycle (digit 0)\n        dial.dataset.value = '0';\n    }, 50);\n    \n    // Snap to nearest digit on scroll end\n    let scrollTimeout;\n    dial.addEventListener('scroll', () => {\n        clearTimeout(scrollTimeout);\n        scrollTimeout = setTimeout(() => {\n            const dialHeight = dial.querySelector('.dial-digit').offsetHeight;\n            const scrollPos = dial.scrollTop;\n            const digitIndex = Math.round(scrollPos / dialHeight);\n            const snappedPos = digitIndex * dialHeight;\n            dial.scrollTop = snappedPos;\n            \n            // Update data-value (mod 10 to get actual digit)\n            const actualDigit = digitIndex % 10;\n            dial.dataset.value = actualDigit;\n            \n            // Loop scroll if needed\n            if (digitIndex < 5) {\n                dial.scrollTop = snappedPos + (dialHeight * 10);\n            } else if (digitIndex > 25) {\n                dial.scrollTop = snappedPos - (dialHeight * 10);\n            }\n        }, 150);\n    });\n});\n\n// Generate unique peer ID\nfunction generatePeerId() {\n    return `peer_${Math.random().toString(36).substr(2, 9)}`;\n}\n\n// Update UI status\nfunction updateStatus(status, message) {\n    statusText.textContent = message.toUpperCase();\n    statusDot.className = 'status-dot';\n    if (status === 'connected') {\n        statusDot.classList.add('connected');\n    } else if (status === 'talking') {\n        statusDot.classList.add('talking');\n    }\n}\n\n// Update peers count and list\nfunction updatePeersList() {\n    peersCount.textContent = peers.size + 1; // +1 for self\n    \n    peersListItems.innerHTML = '';\n    const selfItem = document.createElement('li');\n    selfItem.textContent = 'You';\n    selfItem.style.fontWeight = 'bold';\n    peersListItems.appendChild(selfItem);\n    \n    peers.forEach((peer, id) => {\n        const li = document.createElement('li');\n        li.id = `peer-item-${id}`;\n        li.textContent = id.substr(0, 12);\n        if (activeTalkers.has(id)) li.classList.add('talking');\n        peersListItems.appendChild(li);\n    });\n}\n\nfunction getChannelId() {\n    return dials.map(d => d.dataset.value || '0').join('');\n}\n\n// Reset button - leave channel and reset all dials to 0\nconst resetBtn = document.getElementById('resetBtn');\nconst rejoinBtn = document.getElementById('rejoinBtn');\nlet lastChannel = null;\n\nresetBtn.addEventListener('click', () => {\n    // Leave channel if connected\n    if (currentRoom) {\n        socket.emit('leave-room', { roomId: currentRoom, peerId }, (resp) => {\n            if (resp && resp.error) {\n                console.error('Leave error:', resp.error);\n            }\n        });\n        currentRoom = null;\n        joinBtn.textContent = 'JOIN CHANNEL';\n        joinBtn.classList.remove('leave-btn');\n        joinBtn.classList.add('join-btn');\n        joinBtn.disabled = false;\n        updateStatus('disconnected', 'Offline');\n        pttButton.disabled = true;\n        peers.clear();\n        updatePeersList();\n        \n        // Stop any ongoing recording\n        if (isRecording && mediaRecorder) {\n            mediaRecorder.stop();\n            isRecording = false;\n        }\n        if (vuAnimationId) {\n            cancelAnimationFrame(vuAnimationId);\n            vuAnimationId = null;\n        }\n        \n        rejoinBtn.style.display = 'none';\n    }\n    \n    // Reset all dials to 0\n    dials.forEach(dial => {\n        // Get actual dial height from first digit element\n        const actualHeight = dial.querySelector('.dial-digit').offsetHeight;\n        // Scroll to middle cycle (digit 0)\n        dial.scrollTop = actualHeight * 10;\n        dial.dataset.value = '0';\n    });\n    roomInfo.textContent = '';\n    lastChannel = null;\n});\n\n// Rejoin button - reconnect to last channel\nrejoinBtn.addEventListener('click', async () => {\n    if (!lastChannel || lastChannel === '00000') {\n        alert('No previous channel to rejoin.');\n        return;\n    }\n    \n    const channelToRejoin = lastChannel;\n    \n    // If currently in a room, leave it first\n    if (currentRoom) {\n        socket.emit('leave-room', { roomId: currentRoom, peerId }, (resp) => {\n            if (resp && resp.error) {\n                console.error('Leave error:', resp.error);\n            }\n        });\n        \n        // Stop recording if active\n        if (isRecording) {\n            try {\n                mediaRecorder.stop();\n                isRecording = false;\n            } catch (e) {\n                console.error('Error stopping recorder:', e);\n            }\n        }\n        \n        // Clear VU meter\n        if (vuAnimationId) {\n            cancelAnimationFrame(vuAnimationId);\n            vuAnimationId = null;\n        }\n        const ctx = vuGaugeCanvas.getContext('2d');\n        drawGauge(ctx, vuGaugeCanvas.width, vuGaugeCanvas.height, 0);\n        \n        currentRoom = null;\n        joinBtn.textContent = 'JOIN CHANNEL';\n        joinBtn.classList.remove('leave-btn');\n        joinBtn.classList.add('join-btn');\n        updateStatus('disconnected', 'Offline');\n        pttButton.disabled = true;\n        peers.clear();\n        updatePeersList();\n        roomInfo.textContent = '';\n    }\n    \n    // Set dials to last channel\n    const digits = channelToRejoin.split('');\n    dials.forEach((dial, index) => {\n        const digit = parseInt(digits[index] || '0');\n        const dialHeight = dial.querySelector('.dial-digit').offsetHeight;\n        const targetPos = dialHeight * (10 + digit); // Middle cycle + digit\n        dial.scrollTop = targetPos;\n        dial.dataset.value = digit.toString();\n    });\n    \n    // Trigger join after a brief delay\n    setTimeout(() => {\n        joinBtn.click();\n    }, 300);\n});\n\n// Join / Leave channel\njoinBtn.addEventListener('click', async () => {\n  if (currentRoom) {\n        // Leave flow\n    socket.emit('leave-room', { roomId: currentRoom, peerId }, (resp) => {\n      if (resp && resp.error) {\n        console.error('Leave error:', resp.error);\n        return;\n      }\n      lastChannel = currentRoom;\n      currentRoom = null;\n      joinBtn.textContent = 'JOIN CHANNEL';\n      joinBtn.classList.remove('leave-btn');\n      joinBtn.classList.add('join-btn');\n      updateStatus('disconnected', 'Offline');\n      pttButton.disabled = true;\n      peers.clear();\n      updatePeersList();\n      roomInfo.textContent = '';\n      rejoinBtn.style.display = 'inline-block';\n    });\n    return;\n  }\n  \n  const roomId = getChannelId();\n  \n  // Prevent joining inactive channel 00000\n  if (roomId === '00000') {\n    alert('Channel 00000 is inactive. Please select a different channel.');\n    return;\n  }\n  \n  try {\n    joinBtn.disabled = true;\n    updateStatus('connecting', 'Connecting');\n    socket.emit('join-room', { roomId, peerId }, async (response) => {\n      if (response.error) throw new Error(response.error);\n      currentRoom = roomId;\n      lastChannel = roomId;\n      roomInfo.textContent = `Connected to ${roomId}`;\n      \n      // Create audio context with speaker output preference on mobile\n      const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n      audioContext = new (window.AudioContext || window.webkitAudioContext)({\n        latencyHint: 'interactive',\n        sampleRate: 48000\n      });\n      \n      // On iOS, ensure audio routing to speaker\n      if (isMobile && navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n        // Trigger audio session for speaker output\n        try {\n          const dummyStream = await navigator.mediaDevices.getUserMedia({ audio: true });\n          dummyStream.getTracks().forEach(track => track.stop());\n        } catch (e) {\n          console.log('Could not initialize audio session:', e);\n        }\n      }\n      \n      updateStatus('connected', 'Online');\n      pttButton.disabled = false;\n      joinBtn.disabled = false;\n      joinBtn.textContent = 'LEAVE CHANNEL';\n      joinBtn.classList.remove('join-btn');\n      joinBtn.classList.add('leave-btn');\n      rejoinBtn.style.display = 'inline-block';\n      // Don't call updatePeersList yet - wait for room-users event\n    });\n  } catch (error) {\n    console.error('Error joining room:', error);\n    alert('Failed to join channel: ' + error.message);\n    joinBtn.disabled = false;\n    updateStatus('disconnected', 'Offline');\n  }\n});\n\n// Handle room users list (sent on join)\nsocket.on('room-users', ({ peers: peersList }) => {\n    console.log('Room users:', peersList);\n    // Add all existing peers\n    peersList.forEach(pid => {\n        if (pid !== peerId && !peers.has(pid)) {\n            peers.set(pid, {});\n        }\n    });\n    updatePeersList();\n});\n\n// Handle peer joined\nsocket.on('peer-joined', ({ peerId: newPeerId }) => {\n    console.log('Peer joined:', newPeerId);\n    if (!peers.has(newPeerId)) {\n        peers.set(newPeerId, {});\n    }\n    updatePeersList();\n});\n\n// Handle peer left\nsocket.on('peer-left', ({ peerId: leftPeerId }) => {\n    console.log('Peer left:', leftPeerId);\n    if (peers.has(leftPeerId)) {\n        peers.delete(leftPeerId);\n    }\n    updatePeersList();\n});\n\n// PTT button handlers\nlet audioStream = null;\n\npttButton.addEventListener('mousedown', startTalking);\npttButton.addEventListener('mouseup', stopTalking);\npttButton.addEventListener('mouseleave', stopTalking);\npttButton.addEventListener('touchstart', startTalking);\npttButton.addEventListener('touchend', stopTalking);\n\nasync function startTalking(e) {\n    e.preventDefault();\n    if (!currentRoom || isRecording) return;\n\n    try {\n        // Get microphone access\n        audioStream = await navigator.mediaDevices.getUserMedia({\n            audio: {\n                echoCancellation: true,\n                noiseSuppression: true,\n                autoGainControl: true,\n                sampleRate: 48000, // High sample rate for low latency\n                latency: 0 // Request lowest possible latency\n            }\n        });\n\n        // Setup MediaRecorder\n        mediaRecorder = new MediaRecorder(audioStream, {\n            mimeType: 'audio/webm;codecs=opus'\n        });\n\n        audioChunks = [];\n        mediaRecorder.ondataavailable = (event) => {\n            if (event.data.size > 0) {\n                audioChunks.push(event.data);\n            }\n        };\n\n        mediaRecorder.onstop = async () => {\n            if (audioChunks.length > 0) {\n                const audioBlob = new Blob(audioChunks, { type: 'audio/webm;codecs=opus' });\n                const arrayBuffer = await audioBlob.arrayBuffer();\n                const uint8Array = new Uint8Array(arrayBuffer);\n                socket.emit('audio-data', {\n                    roomId: currentRoom,\n                    peerId,\n                    audioData: uint8Array\n                });\n            }\n            // Stop all tracks\n            if (audioStream) {\n                audioStream.getTracks().forEach(track => track.stop());\n            }\n        };\n\n        // Start recording with minimal timeslice for responsiveness\n        mediaRecorder.start(10); // Collect data every 10ms for smoother encoding\n        isRecording = true;\n\n        // Setup VU meter\n        setupVUMeter(audioStream);\n\n        // Play transmission start sound\n        playTransmissionSound('start');\n\n        // Update UI\n        socket.emit('ptt-start', { roomId: currentRoom, peerId });\n        pttButton.classList.add('talking');\n        updateStatus('talking', 'Talking');\n\n    } catch (err) {\n        console.error('PTT start error', err);\n        alert('Could not access microphone: ' + err.message);\n    }\n}\n\nfunction stopTalking() {\n    if (!isRecording) return;\n\n    // Stop recording\n    mediaRecorder.stop();\n    isRecording = false;\n\n    // Stop VU meter\n    if (vuAnimationId) {\n        cancelAnimationFrame(vuAnimationId);\n        vuAnimationId = null;\n    }\n\n    // Play transmission end sound\n    playTransmissionSound('end');\n\n    // Update UI\n    socket.emit('ptt-stop', { roomId: currentRoom, peerId });\n    pttButton.classList.remove('talking');\n    updateStatus('connected', 'Online');\n}\n\nfunction setupVUMeter(stream) {\n    try {\n        audioContext = audioContext || new (window.AudioContext || window.webkitAudioContext)();\n        const source = audioContext.createMediaStreamSource(stream);\n        analyser = audioContext.createAnalyser();\n        analyser.fftSize = 512;\n        const bufferLength = analyser.frequencyBinCount;\n        vuDataArray = new Uint8Array(bufferLength);\n        source.connect(analyser);\n        const ctx = vuGaugeCanvas.getContext('2d');\n        const w = vuGaugeCanvas.width;\n        const h = vuGaugeCanvas.height;\n        \n        const draw = () => {\n            analyser.getByteFrequencyData(vuDataArray);\n            let sum = 0;\n            const len = Math.floor(vuDataArray.length / 6);\n            for (let i = 0; i < len; i++) sum += vuDataArray[i];\n            const avg = sum / len;\n            const level = Math.min(1, avg / 255);\n            drawGauge(ctx, w, h, level);\n            vuAnimationId = requestAnimationFrame(draw);\n        };\n        if (vuAnimationId) cancelAnimationFrame(vuAnimationId);\n        draw();\n    } catch (e) {\n        console.warn('VU meter setup failed', e);\n    }\n}\n\n// Reusable gauge drawing function\nfunction drawGauge(ctx, w, h, level) {\n    ctx.clearRect(0, 0, w, h);\n    ctx.fillStyle = '#0f161b';\n    ctx.fillRect(0, 0, w, h);\n    ctx.strokeStyle = '#2c3e50';\n    ctx.lineWidth = 8;\n    ctx.beginPath();\n    ctx.arc(w/2, h*0.9, h*0.8, Math.PI, Math.PI*2, false);\n    ctx.stroke();\n    for (let i = 0; i <= 10; i++) {\n        const ratio = i / 10;\n        const angle = Math.PI + ratio * Math.PI;\n        const r = h * 0.8;\n        const x1 = w/2 + Math.cos(angle) * (r - 10);\n        const y1 = h*0.9 + Math.sin(angle) * (r - 10);\n        const x2 = w/2 + Math.cos(angle) * (r - 2);\n        const y2 = h*0.9 + Math.sin(angle) * (r - 2);\n        ctx.strokeStyle = i < 7 ? '#27ae60' : i < 9 ? '#f1c40f' : '#e74c3c';\n        ctx.lineWidth = 3;\n        ctx.beginPath();\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x2, y2);\n        ctx.stroke();\n    }\n    const needleAngle = Math.PI + level * Math.PI;\n    ctx.strokeStyle = '#ffedc2';\n    ctx.lineWidth = 4;\n    ctx.beginPath();\n    ctx.moveTo(w/2, h*0.9);\n    ctx.lineTo(w/2 + Math.cos(needleAngle) * (h*0.8 - 18), h*0.9 + Math.sin(needleAngle) * (h*0.8 - 18));\n    ctx.stroke();\n    ctx.fillStyle = '#b38b57';\n    ctx.beginPath();\n    ctx.arc(w/2, h*0.9, 10, 0, Math.PI*2);\n    ctx.fill();\n}\n\n// Handle incoming audio data from other peers\n// Handle received audio data\nsocket.on('audio-data', async ({ peerId: senderId, audioData }) => {\n    if (senderId === peerId) return; // Don't play our own audio\n\n    try {\n        // Play incoming transmission start sound\n        playReceptionSound('start');\n        \n        // Disable PTT during reception\n        const wasPttEnabled = !pttButton.disabled;\n        if (wasPttEnabled) {\n            pttButton.disabled = true;\n            pttButton.style.opacity = '0.3';\n        }\n\n        // Convert received data to ArrayBuffer\n        let arrayBuffer;\n        if (audioData instanceof ArrayBuffer) {\n            arrayBuffer = audioData;\n        } else if (audioData.buffer instanceof ArrayBuffer) {\n            // It's a typed array, get its buffer\n            arrayBuffer = audioData.buffer.slice(audioData.byteOffset, audioData.byteOffset + audioData.byteLength);\n        } else {\n            // Fallback: convert to Uint8Array first\n            const uint8 = new Uint8Array(audioData);\n            arrayBuffer = uint8.buffer;\n        }\n\n        // Decode audio data\n        const audioBuffer = await audioContext.decodeAudioData(arrayBuffer);\n\n        // Create source and analyser for VU meter during playback\n        const source = audioContext.createBufferSource();\n        const analyserNode = audioContext.createAnalyser();\n        analyserNode.fftSize = 512;\n        \n        source.buffer = audioBuffer;\n        source.connect(analyserNode);\n        \n        // Create a GainNode for volume control\n        const gainNode = audioContext.createGain();\n        analyserNode.connect(gainNode);\n        gainNode.connect(audioContext.destination);\n\n        // Force speaker output on mobile devices\n        const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n        if (isMobile) {\n            // Increase volume to ensure it plays on speaker\n            gainNode.gain.value = 2.0;\n            \n            // Try to set audio to speaker if supported\n            if (audioContext.setSinkId) {\n                try {\n                    await audioContext.setSinkId('');\n                } catch (e) {\n                    console.log('setSinkId not supported:', e);\n                }\n            }\n        } else {\n            gainNode.gain.value = 1.0;\n        }\n\n        // Resume audio context if suspended (required by some browsers)\n        if (audioContext.state === 'suspended') {\n            await audioContext.resume();\n        }\n        \n        // Show VU meter during playback\n        const playbackDataArray = new Uint8Array(analyserNode.frequencyBinCount);\n        const ctx = vuGaugeCanvas.getContext('2d');\n        const w = vuGaugeCanvas.width;\n        const h = vuGaugeCanvas.height;\n        \n        let playbackAnimationId;\n        const drawPlaybackVU = () => {\n            analyserNode.getByteFrequencyData(playbackDataArray);\n            let sum = 0;\n            const len = Math.floor(playbackDataArray.length / 6);\n            for (let i = 0; i < len; i++) sum += playbackDataArray[i];\n            const avg = sum / len;\n            const level = Math.min(1, avg / 255);\n            \n            drawGauge(ctx, w, h, level);\n            playbackAnimationId = requestAnimationFrame(drawPlaybackVU);\n        };\n        drawPlaybackVU();\n\n        source.start();\n        console.log('Playing audio from:', senderId);\n\n        // Play end sound and re-enable PTT after audio finishes\n        source.onended = () => {\n            playReceptionSound('end');\n            cancelAnimationFrame(playbackAnimationId);\n            drawGauge(ctx, w, h, 0);\n            if (wasPttEnabled && currentRoom) {\n                pttButton.disabled = false;\n                pttButton.style.opacity = '';\n            }\n        };\n\n    } catch (error) {\n        console.error('Error playing received audio:', error);\n        // Re-enable PTT on error\n        if (currentRoom && !pttButton.classList.contains('talking')) {\n            pttButton.disabled = false;\n            pttButton.style.opacity = '';\n        }\n    }\n});\n\nfunction wireTransportDebug(transport, direction) {\n    transport.on('connectionstatechange', state => {\n        console.log(`[transport ${direction}] connectionstate=${state}`);\n        const el = document.getElementById('statusText');\n        if (state === 'failed') el.textContent = 'Transport failed';\n        else if (state === 'connected') el.textContent = 'Connected';\n    });\n    transport.on('dtlsstatechange', state => {\n        console.log(`[transport ${direction}] dtls=${state}`);\n    });\n    transport.on('icegatheringstatechange', () => {\n        console.log(`[transport ${direction}] iceGatheringState=${transport.iceGatheringState}`);\n    });\n}\n\n// Handle producer closed (cleanup consumer audio elements)\nsocket.on('producer-closed', ({ peerId: closedPeerId, producerId }) => {\n    const peer = peers.get(closedPeerId);\n    if (!peer) return;\n    peer.consumers = peer.consumers.filter(c => {\n        if (c.producerId === producerId) {\n            try { c.close(); } catch (_) {}\n            return false;\n        }\n        return true;\n    });\n    const el = document.querySelector(`#remoteAudioContainer audio[data-peer='${closedPeerId}'][data-producer='${producerId}']`);\n    if (el) el.remove();\n});\n\n// Handle room users list (sent on join)\nsocket.on('room-users', ({ peers: peersList }) => {\n    console.log('Room users:', peersList);\n    // Add all existing peers\n    peersList.forEach(pid => {\n        if (pid !== peerId && !peers.has(pid)) {\n            peers.set(pid, { consumers: [] });\n        }\n    });\n    updatePeersList();\n});\n\n// Handle peer joined\nsocket.on('peer-joined', ({ peerId: newPeerId }) => {\n    console.log('Peer joined:', newPeerId);\n    if (!peers.has(newPeerId)) {\n        peers.set(newPeerId, { consumers: [] });\n    }\n    updatePeersList();\n});\n\n// Handle peer left\nsocket.on('peer-left', ({ peerId: leftPeerId }) => {\n    console.log('Peer left:', leftPeerId);\n    if (peers.has(leftPeerId)) {\n        const peer = peers.get(leftPeerId);\n        peer.consumers.forEach(consumer => consumer.close());\n        peers.delete(leftPeerId);\n    }\n    updatePeersList();\n});\n\n// Handle disconnect\nsocket.on('disconnect', () => {\n  updateStatus('disconnected', 'Offline');\n  pttButton.disabled = true;\n  joinBtn.disabled = false;\n  joinBtn.textContent = 'JOIN CHANNEL';\n  joinBtn.classList.remove('leave-btn');\n  joinBtn.classList.add('join-btn');\n  currentRoom = null;\n  peers.clear();\n  updatePeersList();\n});// Remote peer PTT indicators\nsocket.on('peer-talking-start', ({ peerId: talker }) => {\n    if (talker === peerId) return; // ignore self events\n    activeTalkers.add(talker);\n    const li = document.getElementById(`peer-item-${talker}`);\n    if (li) li.classList.add('talking');\n    showIncomingIndicator();\n    playReceptionSound('start');\n    \n    // Disable PTT for all other users when someone is transmitting\n    if (!isRecording && currentRoom) {\n        pttButton.disabled = true;\n        pttButton.style.opacity = '0.3';\n    }\n});\n\nsocket.on('peer-talking-stop', ({ peerId: talker }) => {\n    activeTalkers.delete(talker);\n    const li = document.getElementById(`peer-item-${talker}`);\n    if (li) li.classList.remove('talking');\n    if (activeTalkers.size === 0) hideIncomingIndicator();\n    playReceptionSound('end');\n    \n    // Re-enable PTT when no one else is transmitting\n    if (activeTalkers.size === 0 && currentRoom && !isRecording) {\n        pttButton.disabled = false;\n        pttButton.style.opacity = '';\n    }\n});\n\nfunction showIncomingIndicator() {\n    if (!incomingIndicator) return;\n    incomingIndicator.classList.add('active');\n}\nfunction hideIncomingIndicator() {\n    if (!incomingIndicator) return;\n    incomingIndicator.classList.remove('active');\n}\n\nfunction playTransmissionSound(type = 'start') {\n    try {\n        const ctx = audioContext || new (window.AudioContext || window.webkitAudioContext)();\n        audioContext = ctx;\n        const osc = ctx.createOscillator();\n        const gain = ctx.createGain();\n        const now = ctx.currentTime;\n        const duration = 0.2;\n        const freq = type === 'start' ? 800 : 600; // Higher pitch for start, lower for end\n        osc.frequency.setValueAtTime(freq, now);\n        gain.gain.setValueAtTime(0.0001, now);\n        gain.gain.exponentialRampToValueAtTime(0.3, now + 0.02);\n        gain.gain.exponentialRampToValueAtTime(0.0001, now + duration);\n        osc.connect(gain).connect(ctx.destination);\n        osc.start(now);\n        osc.stop(now + duration + 0.02);\n    } catch (e) {\n        // ignore audio context errors\n    }\n}\n\nfunction playReceptionSound(type = 'start') {\n    try {\n        const ctx = audioContext || new (window.AudioContext || window.webkitAudioContext)();\n        audioContext = ctx;\n        const osc = ctx.createOscillator();\n        const gain = ctx.createGain();\n        const now = ctx.currentTime;\n        const duration = 0.15;\n        const freq = type === 'start' ? 1000 : 400; // Very high pitch for incoming start, low for end\n        osc.frequency.setValueAtTime(freq, now);\n        gain.gain.setValueAtTime(0.0001, now);\n        gain.gain.exponentialRampToValueAtTime(0.4, now + 0.01);\n        gain.gain.exponentialRampToValueAtTime(0.0001, now + duration);\n        osc.connect(gain).connect(ctx.destination);\n        osc.start(now);\n        osc.stop(now + duration + 0.02);\n    } catch (e) {\n        // ignore audio context errors\n    }\n}\n"],"names":["socket","io","audioContext","mediaRecorder","audioChunks","isRecording","remoteAudioBuffers","Map","analyser","vuDataArray","vuAnimationId","currentRoom","peerId","generatePeerId","peers","activeTalkers","Set","joinBtn","document","getElementById","roomInfo","statusText","statusDot","pttButton","peersCount","peersListItems","incomingIndicator","vuGaugeCanvas","dial1","dial2","dial3","dial4","dial5","dials","forEach","dial","innerHTML","cycle","i","digitEl","createElement","className","textContent","appendChild","setTimeout","dialHeight","querySelector","offsetHeight","scrollTop","dataset","value","scrollTimeout","addEventListener","clearTimeout","scrollPos","digitIndex","Math","round","snappedPos","actualDigit","random","toString","substr","updateStatus","status","message","toUpperCase","classList","add","updatePeersList","size","selfItem","style","fontWeight","peer","id","li","has","getChannelId","map","d","join","resetBtn","rejoinBtn","lastChannel","emit","roomId","resp","error","console","remove","disabled","clear","stop","cancelAnimationFrame","display","actualHeight","alert","channelToRejoin","e","ctx","getContext","drawGauge","width","height","digits","split","index","digit","parseInt","targetPos","click","response","Error","isMobile","test","navigator","userAgent","window","AudioContext","webkitAudioContext","latencyHint","sampleRate","mediaDevices","getUserMedia","dummyStream","audio","getTracks","track","log","on","peersList","pid","set","newPeerId","leftPeerId","delete","audioStream","startTalking","stopTalking","preventDefault","echoCancellation","noiseSuppression","autoGainControl","latency","MediaRecorder","mimeType","ondataavailable","event","data","push","onstop","length","audioBlob","Blob","type","arrayBuffer","uint8Array","Uint8Array","audioData","start","setupVUMeter","playTransmissionSound","err","stream","source","createMediaStreamSource","createAnalyser","fftSize","bufferLength","frequencyBinCount","connect","w","h","draw","getByteFrequencyData","sum","len","floor","avg","level","min","requestAnimationFrame","warn","clearRect","fillStyle","fillRect","strokeStyle","lineWidth","beginPath","arc","PI","stroke","ratio","angle","r","x1","cos","y1","sin","x2","y2","moveTo","lineTo","needleAngle","fill","senderId","playReceptionSound","wasPttEnabled","opacity","ArrayBuffer","buffer","slice","byteOffset","byteLength","uint8","audioBuffer","decodeAudioData","createBufferSource","analyserNode","gainNode","createGain","destination","gain","setSinkId","state","resume","playbackDataArray","playbackAnimationId","drawPlaybackVU","onended","contains","wireTransportDebug","transport","direction","el","iceGatheringState","closedPeerId","producerId","get","consumers","filter","c","close","_","consumer","talker","showIncomingIndicator","hideIncomingIndicator","osc","createOscillator","now","currentTime","duration","freq","frequency","setValueAtTime","exponentialRampToValueAtTime"],"sourceRoot":""}